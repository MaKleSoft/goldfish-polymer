<link rel="import" href="../../../bower_components/polymer/polymer.html">

<polymer-element name="core-module" attributes="name as">
    <script>
        (function() {
            var modules = {};

            Polymer("core-module", {
                attached: function() {
                    this.attachModule();
                },
                attachModule: function() { 
                    var host = this.parentNode.host,
                        module = modules[this.name] || null,
                        handle = this.as || this.name;

                    host._ = host._ || {};
                    host._[handle] = module;
                    this.fire("moduleready", {name: this.name, module: module, handle: handle});
                }
            });

            window.module = {register: function(name, obj) {
                modules[name] = obj;
            }};
        })();
    </script>
</polymer-element>