<link rel="import" href="base.html">
<link rel="import" href="store.html">
<link rel="import" href="ajax.html">

<script>

goldfish.service = (function(request, store) {
    "use strict";

    var service = {
        path: "",
        model: "",
        pk: "id",
        related: {
            // someProperty: goldfish.api.myapi
        },
        list: function(opts) {
            return request(this.path, "GET", opts).then(function(res) {
                return res.data.map(store.bind(null, this));
            }.bind(this));
        },
        load: function(opts) {
            var id = opts[this.pk],
                path = this.path + "/" + id;

            return request(path, "GET").then(function(res) {
                return store(this, res);
            }.bind(this));
        },
        request: request
    };

    return service;

})(goldfish.ajax.request, goldfish.store);

</script>